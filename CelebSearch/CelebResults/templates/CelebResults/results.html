<html>
<head>
    <title>Tweets</title>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script>
    	var tweet_data = [];
    	var tweet_subjectivity = [];
		var positive = 0;
		var negative = 0;
		var neutral = 0;
		var fact = 0;
		var opinion = 0;
		var neither = 0;
		{% for a,b in scores %}
			tweet_data.push({{a}});
			tweet_subjectivity.push({{b}});
		{% endfor %}
		for(var i = 0; i < tweet_data.length; i++){
			if( tweet_data[i] > 0.0){
				positive +=1;
			} else if (tweet_data[i]< 0.0){
				negative +=1;
			} else {
				neutral += 1;
			}
			
		}
		for(var i = 0; i < tweet_subjectivity.length; i++){
			if(tweet_subjectivity[i] < 0.5){
				fact += 1;
			} else if (tweet_subjectivity > 0.5){
				opinion += 1;
			} else {
				neither += 1;
			}
		}
		
	</script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Positive',     positive],
          ['Negative',      negative],
          ['Neutral',  neutral],
        ]);

        var data2 = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Opinion',     opinion],
          ['fact',      fact],
          ['Neither',  neither],
        ]);

        var options = {
          title: 'Aggregate Sentiment',
          slices:{
          	0: {color: 'black'},
          	1: {color: 'gray'},
          	2: {color: '#838F9B'}
          }
      };

        var options2 = {
          title: 'Tweet Subjectivity',
          slices:{
          	0: {color: 'black'},
          	1: {color: 'gray'},
          	2: {color: '#838F9B'}
          }

        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
        var chart2 = new google.visualization.PieChart(document.getElementById('piechart2'));
        chart2.draw(data2,options2);
      }
    </script>
</head>
<body>
    <ol>
    {% for tweet in tweets %}
        <li> {{tweet.text}} </li>
    {% endfor %}
    {% for score in scores %}
        <li> {{score}} </li>
    {% endfor %}
    </ol>
    <div id="piechart" style="width: 900px; height: 500px;"></div>
    <div id="piechart2" style="width: 900px; height: 500px;"></div>
</body>
</html>